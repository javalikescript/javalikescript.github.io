<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<head>
    <title>Lua JLS 0.7</title>
    <link rel="stylesheet" href="../ldoc.css" type="text/css" />
</head>
<body>

<div id="container">

<div id="product">
	<div id="product_logo"></div>
	<div id="product_name"><big><b></b></big></div>
	<div id="product_description"></div>
</div> <!-- id="product" -->


<div id="main">


<!-- Menu -->

<div id="navigation">
<br/>
<h1>luajls</h1>


<ul>
  <li><a href="../index.html">Index</a></li>
</ul>

<h2>Contents</h2>
<ul>
<li><a href="#Class_StreamHandler">Class StreamHandler </a></li>
</ul>


<h2>Modules</h2>
<ul class="nowrap">
  <li><a href="../modules/jls.io.File.html">jls.io.File</a></li>
  <li><a href="../modules/jls.io.FileDescriptor.html">jls.io.FileDescriptor</a></li>
  <li><a href="../modules/jls.io.Path.html">jls.io.Path</a></li>
  <li><a href="../modules/jls.io.Pipe.html">jls.io.Pipe</a></li>
  <li><a href="../modules/jls.io.Serial.html">jls.io.Serial</a></li>
  <li><strong>jls.io.StreamHandler</strong></li>
  <li><a href="../modules/jls.lang.Exception.html">jls.lang.Exception</a></li>
  <li><a href="../modules/jls.lang.ProcessBuilder.html">jls.lang.ProcessBuilder</a></li>
  <li><a href="../modules/jls.lang.ProcessHandle.html">jls.lang.ProcessHandle</a></li>
  <li><a href="../modules/jls.lang.Promise.html">jls.lang.Promise</a></li>
  <li><a href="../modules/jls.lang.StringBuffer.html">jls.lang.StringBuffer</a></li>
  <li><a href="../modules/jls.lang.Thread.html">jls.lang.Thread</a></li>
  <li><a href="../modules/jls.lang.class.html">jls.lang.class</a></li>
  <li><a href="../modules/jls.lang.event.html">jls.lang.event</a></li>
  <li><a href="../modules/jls.lang.loader.html">jls.lang.loader</a></li>
  <li><a href="../modules/jls.lang.logger.html">jls.lang.logger</a></li>
  <li><a href="../modules/jls.lang.system.html">jls.lang.system</a></li>
  <li><a href="../modules/jls.net.TcpSocket.html">jls.net.TcpSocket</a></li>
  <li><a href="../modules/jls.net.UdpSocket.html">jls.net.UdpSocket</a></li>
  <li><a href="../modules/jls.net.Url.html">jls.net.Url</a></li>
  <li><a href="../modules/jls.net.dns.html">jls.net.dns</a></li>
  <li><a href="../modules/jls.net.http.HttpClient.html">jls.net.http.HttpClient</a></li>
  <li><a href="../modules/jls.net.http.HttpExchange.html">jls.net.http.HttpExchange</a></li>
  <li><a href="../modules/jls.net.http.HttpFilter.html">jls.net.http.HttpFilter</a></li>
  <li><a href="../modules/jls.net.http.HttpHandler.html">jls.net.http.HttpHandler</a></li>
  <li><a href="../modules/jls.net.http.HttpHeaders.html">jls.net.http.HttpHeaders</a></li>
  <li><a href="../modules/jls.net.http.HttpMessage.html">jls.net.http.HttpMessage</a></li>
  <li><a href="../modules/jls.net.http.HttpServer.html">jls.net.http.HttpServer</a></li>
  <li><a href="../modules/jls.net.http.WebSocket.html">jls.net.http.WebSocket</a></li>
  <li><a href="../modules/jls.net.mqtt.html">jls.net.mqtt</a></li>
  <li><a href="../modules/jls.util.Channel.html">jls.util.Channel</a></li>
  <li><a href="../modules/jls.util.Date.html">jls.util.Date</a></li>
  <li><a href="../modules/jls.util.EventPublisher.html">jls.util.EventPublisher</a></li>
  <li><a href="../modules/jls.util.List.html">jls.util.List</a></li>
  <li><a href="../modules/jls.util.LocalDateTime.html">jls.util.LocalDateTime</a></li>
  <li><a href="../modules/jls.util.Map.html">jls.util.Map</a></li>
  <li><a href="../modules/jls.util.MessageDigest.html">jls.util.MessageDigest</a></li>
  <li><a href="../modules/jls.util.Scheduler.html">jls.util.Scheduler</a></li>
  <li><a href="../modules/jls.util.SerialWorker.html">jls.util.SerialWorker</a></li>
  <li><a href="../modules/jls.util.WebView.html">jls.util.WebView</a></li>
  <li><a href="../modules/jls.util.Worker.html">jls.util.Worker</a></li>
  <li><a href="../modules/jls.util.ast.html">jls.util.ast</a></li>
  <li><a href="../modules/jls.util.codec.html">jls.util.codec</a></li>
  <li><a href="../modules/jls.util.json.html">jls.util.json</a></li>
  <li><a href="../modules/jls.util.strings.html">jls.util.strings</a></li>
  <li><a href="../modules/jls.util.tables.html">jls.util.tables</a></li>
  <li><a href="../modules/jls.util.xml.html">jls.util.xml</a></li>
  <li><a href="../modules/jls.util.zip.Deflater.html">jls.util.zip.Deflater</a></li>
  <li><a href="../modules/jls.util.zip.Inflater.html">jls.util.zip.Inflater</a></li>
  <li><a href="../modules/jls.util.zip.ZipFile.html">jls.util.zip.ZipFile</a></li>
  <li><a href="../modules/jls.util.zip.gzip.html">jls.util.zip.gzip</a></li>
  <li><a href="../modules/jls.util.zip.tar.html">jls.util.zip.tar</a></li>
</ul>
<h2>Topics</h2>
<ul class="">
  <li><a href="../topics/manual.md.html">manual</a></li>
</ul>

</div>

<div id="content">

<h1>Module <code>jls.io.StreamHandler</code></h1>
<p>Provides stream handler class and utility functions.</p>
<p>A stream handler provides a way to deal with an input stream asynchronously.
Basicaly it consists in a function that will be called when data is available.
If the stream ends then the data function is called with no data allowing to execute specific steps.
If the stream has an issue then the error function is called.</p>

<p>Streams classes are mainly used by <a href="../modules/jls.net.TcpSocket.html#">TCP</a> and <a href="../modules/jls.net.UdpSocket.html#">UDP</a> protocols.</p>
    <h3>Usage:</h3>
    <ul>
        <pre class="example">local std = StreamHandler:new(function(_, data)
  if data then
    io.stdout:write(data)
  end
end, function(_, err)
  io.stderr:write(err or &apos;Stream error&apos;)
end)

-- or
local std = StreamHandler:new(function(err, data)
  if err then
    io.stderr:write(tostring(err))
  elseif data then
    io.stdout:write(data)
  end
end)
</pre>
    </ul>


<h2><a href="#Class_StreamHandler">Class StreamHandler </a></h2>
<table class="function_list">
	<tr>
	<td class="name" nowrap><a href="#StreamHandler:new">StreamHandler:new ([onDataOrCallback[, onError]])</a></td>
	<td class="summary">Creates a stream handler.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#streamHandler:onData">streamHandler:onData (data, ...)</a></td>
	<td class="summary">The specified data is available for this stream.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#streamHandler:onError">streamHandler:onError (err)</a></td>
	<td class="summary">The specified error occured on this stream.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#streamHandler:close">streamHandler:close ()</a></td>
	<td class="summary">Closes this stream handler.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#streamHandler:toCallback">streamHandler:toCallback ()</a></td>
	<td class="summary">Returns this stream handler as a callback function.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#StreamHandler.ensureCallback">StreamHandler.ensureCallback (cb[, lazy])</a></td>
	<td class="summary">Returns a callback function.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#StreamHandler.ensureStreamHandler">StreamHandler.ensureStreamHandler (sh)</a></td>
	<td class="summary">Returns a StreamHandler.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#StreamHandler.fill">StreamHandler.fill (sh, data)</a></td>
	<td class="summary">Fills the specified stream handler with the specified data.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#StreamHandler.tee">StreamHandler.tee (firstStream, secondStream)</a></td>
	<td class="summary">Creates a stream handler with two handlers.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#StreamHandler.block">StreamHandler.block ([handler[, size]])</a></td>
	<td class="summary">Creates a BlockStreamHandler that allows to pass fixed size blocks to the wrapped handler.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#StreamHandler.buffer">StreamHandler.buffer ([handler])</a></td>
	<td class="summary">Creates a BufferedStreamHandler that allows to buffer the stream to pass to the wrapped handler.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#StreamHandler.chunk">StreamHandler.chunk ([handler], pattern[, plain[, limit]])</a></td>
	<td class="summary">Creates a ChunkedStreamHandler that allows to buffer a stream and to call a sub handler depending on specified limit or pattern.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#StreamHandler.delay">StreamHandler.delay (...)</a></td>
	<td class="summary">Creates a DelayedStreamHandler that allows to buffer a stream while the sub handler is not available.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#StreamHandler.file">StreamHandler.file (file[, overwrite])</a></td>
	<td class="summary">Creates a FileStreamHandler that allows to write a stream into and from a file.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#StreamHandler.promise">StreamHandler.promise ([handler])</a></td>
	<td class="summary">Creates a PromiseStreamHandler that provides a promise that resolves once the stream is closed.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#StreamHandler.range">StreamHandler.range ([handler[, offset[, length]]])</a></td>
	<td class="summary">Creates a RangeStreamHandler that allows to restrict the stream to pass to the wrapped handler to a specified range.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#StreamHandler.std">StreamHandler.std</a></td>
	<td class="summary">The standard stream writing data to standard output and error to standard error.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#StreamHandler.null">StreamHandler.null</a></td>
	<td class="summary">A null stream.</td>
	</tr>
</table>

<br/>
<br/>


    <h2 class="section-header has-description"><a name="Class_StreamHandler"></a>Class StreamHandler </h2>

          <div class="section-description">
          A StreamHandler class.
 This class could be inherited to process a data stream.
          </div>
    <dl class="function">
    <dt>
    <a name = "StreamHandler:new"></a>
    <strong>StreamHandler:new ([onDataOrCallback[, onError]])</strong>
    </dt>
    <dd>
    Creates a stream handler.
 The optional functions take two parameters, the stream and the data or the error

    </ul>

    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">onDataOrCallback</span>
            <span class="types"><span class="type">function</span></span>
         a function to use when receiving data or callback if onError is not specified.
         (<em>optional</em>)
        </li>
        <li><span class="parameter">onError</span>
            <span class="types"><span class="type">function</span></span>
         a function to use in case of error.
         (<em>optional</em>)
        </li>
    </ul>





</dd>
    <dt>
    <a name = "streamHandler:onData"></a>
    <strong>streamHandler:onData (data, ...)</strong>
    </dt>
    <dd>
    The specified data is available for this stream.

    </ul>

    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">data</span>
         the new data to process, nil to indicate the end of the stream.
        </li>
        <li><span class="parameter">...</span>
         the optional parameters
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

        an optional promise that will resolve when the data has been processed.
    </ol>




</dd>
    <dt>
    <a name = "streamHandler:onError"></a>
    <strong>streamHandler:onError (err)</strong>
    </dt>
    <dd>
    The specified error occured on this stream.

    </ul>

    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">err</span>
         the error that occured on this stream.
        </li>
    </ul>





</dd>
    <dt>
    <a name = "streamHandler:close"></a>
    <strong>streamHandler:close ()</strong>
    </dt>
    <dd>
    Closes this stream handler.
 Do nothing by default. Must support to be called multiple times.

    </ul>






</dd>
    <dt>
    <a name = "streamHandler:toCallback"></a>
    <strong>streamHandler:toCallback ()</strong>
    </dt>
    <dd>
    Returns this stream handler as a callback function.
 The callback function has two arguments: the error and the data.
 The data could be nil indicating the end of the stream.

    </ul>


    <h3>Returns:</h3>
    <ol>

           <span class="types"><span class="type">function</span></span>
        the callback function
    </ol>




</dd>
    <dt>
    <a name = "StreamHandler.ensureCallback"></a>
    <strong>StreamHandler.ensureCallback (cb[, lazy])</strong>
    </dt>
    <dd>
    Returns a callback function.

    </ul>

    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">cb</span>
         a callback function or a StreamHandler.
        </li>
        <li><span class="parameter">lazy</span>
            <span class="types"><span class="type">boolean</span></span>
         true to indicate that nil values are valid.
         (<em>optional</em>)
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

           <span class="types"><span class="type">function</span></span>
        a callback function.
    </ol>




</dd>
    <dt>
    <a name = "StreamHandler.ensureStreamHandler"></a>
    <strong>StreamHandler.ensureStreamHandler (sh)</strong>
    </dt>
    <dd>
    Returns a StreamHandler.

    </ul>

    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">sh</span>
         a callback function or a StreamHandler.
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

           <span class="types"><a class="type" href="../modules/jls.io.StreamHandler.html#StreamHandler">StreamHandler</a></span>
        a StreamHandler.
    </ol>




</dd>
    <dt>
    <a name = "StreamHandler.fill"></a>
    <strong>StreamHandler.fill (sh, data)</strong>
    </dt>
    <dd>
    Fills the specified stream handler with the specified data.
 This is shortcut for sh:onData(data); sh:onData(nil)

    </ul>

    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">sh</span>
            <span class="types"><a class="type" href="../modules/jls.io.StreamHandler.html#StreamHandler">StreamHandler</a></span>
         the StreamHandler to fill.
        </li>
        <li><span class="parameter">data</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.4/manual.html#6.4">string</a></span>
         the data to process.
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

        an optional promise that will resolve when the data has been processed.
    </ol>




</dd>
    <dt>
    <a name = "StreamHandler.tee"></a>
    <strong>StreamHandler.tee (firstStream, secondStream)</strong>
    </dt>
    <dd>
    Creates a stream handler with two handlers.

    </ul>

    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">firstStream</span>
            <span class="types"><a class="type" href="../modules/jls.io.StreamHandler.html#StreamHandler">StreamHandler</a></span>
         The first stream handlers.
        </li>
        <li><span class="parameter">secondStream</span>
            <span class="types"><a class="type" href="../modules/jls.io.StreamHandler.html#StreamHandler">StreamHandler</a></span>
         The second stream handlers.
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

           <span class="types"><a class="type" href="../modules/jls.io.StreamHandler.html#StreamHandler">StreamHandler</a></span>
        a StreamHandler.
    </ol>




</dd>
    <dt>
    <a name = "StreamHandler.block"></a>
    <strong>StreamHandler.block ([handler[, size]])</strong>
    </dt>
    <dd>
    Creates a BlockStreamHandler that allows to pass fixed size blocks to the wrapped handler.

    </ul>

    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">handler</span>
            <span class="types"><a class="type" href="../modules/jls.io.StreamHandler.html#StreamHandler">StreamHandler</a></span>
         the handler to wrap
         (<em>optional</em>)
        </li>
        <li><span class="parameter">size</span>
            <span class="types"><span class="type">number</span></span>
         the block size, default to 512
         (<em>optional</em>)
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

           <span class="types"><a class="type" href="../modules/jls.io.StreamHandler.html#StreamHandler">StreamHandler</a></span>
        a StreamHandler.
    </ol>




</dd>
    <dt>
    <a name = "StreamHandler.buffer"></a>
    <strong>StreamHandler.buffer ([handler])</strong>
    </dt>
    <dd>
    Creates a BufferedStreamHandler that allows to buffer the stream to pass to the wrapped handler.
 The data will be pass to the wrapped handler once.

    </ul>

    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">handler</span>
            <span class="types"><a class="type" href="../modules/jls.io.StreamHandler.html#StreamHandler">StreamHandler</a></span>
         the handler to wrap
         (<em>optional</em>)
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

           <span class="types"><a class="type" href="../modules/jls.io.StreamHandler.html#StreamHandler">StreamHandler</a></span>
        a StreamHandler.
    </ol>




</dd>
    <dt>
    <a name = "StreamHandler.chunk"></a>
    <strong>StreamHandler.chunk ([handler], pattern[, plain[, limit]])</strong>
    </dt>
    <dd>
    Creates a ChunkedStreamHandler that allows to buffer a stream and to call a sub handler depending on specified limit or pattern.

    </ul>

    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">handler</span>
            <span class="types"><a class="type" href="../modules/jls.io.StreamHandler.html#StreamHandler">StreamHandler</a></span>
         the handler to wrap
         (<em>optional</em>)
        </li>
        <li><span class="parameter">pattern</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.4/manual.html#6.4">string</a></span>
         the pattern to use to split the buffered data to the wrapped handler
        </li>
        <li><span class="parameter">plain</span>
            <span class="types"><span class="type">boolean</span></span>
         true to use the pattern as a plain string
         (<em>optional</em>)
        </li>
        <li><span class="parameter">limit</span>
            <span class="types"><span class="type">number</span></span>
         the max size to buffer waiting for a pattern
         (<em>optional</em>)
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

           <span class="types"><a class="type" href="../modules/jls.io.StreamHandler.html#StreamHandler">StreamHandler</a></span>
        a StreamHandler.
    </ol>




</dd>
    <dt>
    <a name = "StreamHandler.delay"></a>
    <strong>StreamHandler.delay (...)</strong>
    </dt>
    <dd>
    Creates a DelayedStreamHandler that allows to buffer a stream while the sub handler is not available.

    </ul>

    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">...</span>



        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

           <span class="types"><a class="type" href="../modules/jls.io.StreamHandler.html#StreamHandler">StreamHandler</a></span>
        a StreamHandler.
    </ol>




</dd>
    <dt>
    <a name = "StreamHandler.file"></a>
    <strong>StreamHandler.file (file[, overwrite])</strong>
    </dt>
    <dd>
    Creates a FileStreamHandler that allows to write a stream into and from a file.

    </ul>

    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">file</span>
            <span class="types"><span class="type">jls.io.File</span></span>
         The file to create
        </li>
        <li><span class="parameter">overwrite</span>
            <span class="types"><span class="type">boolean</span></span>
         true to indicate that existing file must be re created
         (<em>optional</em>)
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

           <span class="types"><a class="type" href="../modules/jls.io.StreamHandler.html#StreamHandler">StreamHandler</a></span>
        a StreamHandler.
    </ol>




</dd>
    <dt>
    <a name = "StreamHandler.promise"></a>
    <strong>StreamHandler.promise ([handler])</strong>
    </dt>
    <dd>
    Creates a PromiseStreamHandler that provides a promise that resolves once the stream is closed.

    </ul>

    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">handler</span>
            <span class="types"><a class="type" href="../modules/jls.io.StreamHandler.html#StreamHandler">StreamHandler</a></span>
         the handler to wrap
         (<em>optional</em>)
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

           <span class="types"><a class="type" href="../modules/jls.io.StreamHandler.html#StreamHandler">StreamHandler</a></span>
        a StreamHandler.
    </ol>




</dd>
    <dt>
    <a name = "StreamHandler.range"></a>
    <strong>StreamHandler.range ([handler[, offset[, length]]])</strong>
    </dt>
    <dd>
    Creates a RangeStreamHandler that allows to restrict the stream to pass to the wrapped handler to a specified range.

    </ul>

    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">handler</span>
            <span class="types"><a class="type" href="../modules/jls.io.StreamHandler.html#StreamHandler">StreamHandler</a></span>
         the handler to wrap
         (<em>optional</em>)
        </li>
        <li><span class="parameter">offset</span>
            <span class="types"><span class="type">number</span></span>
         the offset of the range, default is 0
         (<em>optional</em>)
        </li>
        <li><span class="parameter">length</span>
            <span class="types"><span class="type">number</span></span>
         the length of the range
         (<em>optional</em>)
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

           <span class="types"><a class="type" href="../modules/jls.io.StreamHandler.html#StreamHandler">StreamHandler</a></span>
        a StreamHandler.
    </ol>




</dd>
    <dt>
    <a name = "StreamHandler.std"></a>
    <strong>StreamHandler.std</strong>
    </dt>
    <dd>
    The standard stream writing data to standard output and error to standard error.

    </ul>






</dd>
    <dt>
    <a name = "StreamHandler.null"></a>
    <strong>StreamHandler.null</strong>
    </dt>
    <dd>
    A null stream.

    </ul>






</dd>
</dl>


</div> <!-- id="content" -->
</div> <!-- id="main" -->
<div id="about">
<i>generated by <a href="http://github.com/stevedonovan/LDoc">LDoc 1.4.6</a></i>
<i style="float:right;">Last updated 2023-03-04 12:25:21 </i>
</div> <!-- id="about" -->
</div> <!-- id="container" -->
</body>
</html>
