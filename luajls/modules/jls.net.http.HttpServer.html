<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<head>
    <title>Lua JLS 0.7</title>
    <link rel="stylesheet" href="../ldoc_fixed.css" type="text/css" />
</head>
<body>

<div id="container">

<div id="product">
	<div id="product_logo"></div>
	<div id="product_name"><big><b></b></big></div>
	<div id="product_description"></div>
</div> <!-- id="product" -->


<div id="main">


<!-- Menu -->

<div id="navigation">
<br/>
<h1>luajls</h1>


<ul>
  <li><a href="../index.html">Index</a></li>
</ul>

<h2>Contents</h2>
<ul>
<li><a href="#Class_HttpServer">Class HttpServer </a></li>
<li><a href="#Class_HttpContext">Class HttpContext </a></li>
</ul>


<h2>Modules</h2>
<ul class="nowrap">
  <li><a href="../modules/jls.io.File.html">jls.io.File</a></li>
  <li><a href="../modules/jls.io.FileDescriptor.html">jls.io.FileDescriptor</a></li>
  <li><a href="../modules/jls.io.Path.html">jls.io.Path</a></li>
  <li><a href="../modules/jls.io.Pipe.html">jls.io.Pipe</a></li>
  <li><a href="../modules/jls.io.Serial.html">jls.io.Serial</a></li>
  <li><a href="../modules/jls.io.StreamHandler.html">jls.io.StreamHandler</a></li>
  <li><a href="../modules/jls.lang.Exception.html">jls.lang.Exception</a></li>
  <li><a href="../modules/jls.lang.ProcessBuilder.html">jls.lang.ProcessBuilder</a></li>
  <li><a href="../modules/jls.lang.ProcessHandle.html">jls.lang.ProcessHandle</a></li>
  <li><a href="../modules/jls.lang.Promise.html">jls.lang.Promise</a></li>
  <li><a href="../modules/jls.lang.StringBuffer.html">jls.lang.StringBuffer</a></li>
  <li><a href="../modules/jls.lang.Thread.html">jls.lang.Thread</a></li>
  <li><a href="../modules/jls.lang.class.html">jls.lang.class</a></li>
  <li><a href="../modules/jls.lang.event.html">jls.lang.event</a></li>
  <li><a href="../modules/jls.lang.loader.html">jls.lang.loader</a></li>
  <li><a href="../modules/jls.lang.logger.html">jls.lang.logger</a></li>
  <li><a href="../modules/jls.lang.system.html">jls.lang.system</a></li>
  <li><a href="../modules/jls.net.TcpSocket.html">jls.net.TcpSocket</a></li>
  <li><a href="../modules/jls.net.UdpSocket.html">jls.net.UdpSocket</a></li>
  <li><a href="../modules/jls.net.Url.html">jls.net.Url</a></li>
  <li><a href="../modules/jls.net.dns.html">jls.net.dns</a></li>
  <li><a href="../modules/jls.net.http.HttpClient.html">jls.net.http.HttpClient</a></li>
  <li><a href="../modules/jls.net.http.HttpExchange.html">jls.net.http.HttpExchange</a></li>
  <li><a href="../modules/jls.net.http.HttpFilter.html">jls.net.http.HttpFilter</a></li>
  <li><a href="../modules/jls.net.http.HttpHandler.html">jls.net.http.HttpHandler</a></li>
  <li><a href="../modules/jls.net.http.HttpHeaders.html">jls.net.http.HttpHeaders</a></li>
  <li><a href="../modules/jls.net.http.HttpMessage.html">jls.net.http.HttpMessage</a></li>
  <li><strong>jls.net.http.HttpServer</strong></li>
  <li><a href="../modules/jls.net.http.WebSocket.html">jls.net.http.WebSocket</a></li>
  <li><a href="../modules/jls.net.mqtt.html">jls.net.mqtt</a></li>
  <li><a href="../modules/jls.util.Channel.html">jls.util.Channel</a></li>
  <li><a href="../modules/jls.util.Codec.html">jls.util.Codec</a></li>
  <li><a href="../modules/jls.util.Date.html">jls.util.Date</a></li>
  <li><a href="../modules/jls.util.EventPublisher.html">jls.util.EventPublisher</a></li>
  <li><a href="../modules/jls.util.List.html">jls.util.List</a></li>
  <li><a href="../modules/jls.util.LocalDateTime.html">jls.util.LocalDateTime</a></li>
  <li><a href="../modules/jls.util.Map.html">jls.util.Map</a></li>
  <li><a href="../modules/jls.util.MessageDigest.html">jls.util.MessageDigest</a></li>
  <li><a href="../modules/jls.util.Scheduler.html">jls.util.Scheduler</a></li>
  <li><a href="../modules/jls.util.SerialWorker.html">jls.util.SerialWorker</a></li>
  <li><a href="../modules/jls.util.WebView.html">jls.util.WebView</a></li>
  <li><a href="../modules/jls.util.Worker.html">jls.util.Worker</a></li>
  <li><a href="../modules/jls.util.ast.html">jls.util.ast</a></li>
  <li><a href="../modules/jls.util.json.html">jls.util.json</a></li>
  <li><a href="../modules/jls.util.strings.html">jls.util.strings</a></li>
  <li><a href="../modules/jls.util.tables.html">jls.util.tables</a></li>
  <li><a href="../modules/jls.util.xml.html">jls.util.xml</a></li>
  <li><a href="../modules/jls.util.zip.Deflater.html">jls.util.zip.Deflater</a></li>
  <li><a href="../modules/jls.util.zip.Inflater.html">jls.util.zip.Inflater</a></li>
  <li><a href="../modules/jls.util.zip.ZipFile.html">jls.util.zip.ZipFile</a></li>
  <li><a href="../modules/jls.util.zip.gzip.html">jls.util.zip.gzip</a></li>
  <li><a href="../modules/jls.util.zip.tar.html">jls.util.zip.tar</a></li>
</ul>
<h2>Topics</h2>
<ul class="">
  <li><a href="../topics/manual.md.html">manual</a></li>
</ul>

</div>

<div id="content">

<h1>Module <code>jls.net.http.HttpServer</code></h1>
<p>An HTTP server implementation that handles HTTP requests.</p>
<p>

</p>


<h2><a href="#Class_HttpServer">Class HttpServer </a></h2>
<table class="function_list">
	<tr>
	<td class="name" nowrap><a href="#HttpServer:new">HttpServer:new ()</a></td>
	<td class="summary">Creates a new HTTP server.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#httpServer:createContext">httpServer:createContext (path, handler)</a></td>
	<td class="summary">Creates a context in this server with the specified path and using the specified handler.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#httpServer:addContexts">httpServer:addContexts (contexts)</a></td>
	<td class="summary">Adds the specified contexts.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#httpServer:bind">httpServer:bind ([node[, port[, backlog[, callback]]]])</a></td>
	<td class="summary">Binds this server to the specified address and port number.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#httpServer:close">httpServer:close ([callback])</a></td>
	<td class="summary">Closes this server.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#HttpServer.notFoundHandler">HttpServer.notFoundHandler</a></td>
	<td class="summary">The default not found handler.</td>
	</tr>
</table>
<h2><a href="#Class_HttpContext">Class HttpContext </a></h2>
<table class="function_list">
	<tr>
	<td class="name" nowrap><a href="#HttpContext:new">HttpContext:new (path[, handler])</a></td>
	<td class="summary">Creates a new Context.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#httpContext:getPath">httpContext:getPath ()</a></td>
	<td class="summary">Returns the context path.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#httpContext:setPathReplacement">httpContext:setPathReplacement (repl)</a></td>
	<td class="summary">Sets the path replacement, default is '%1'.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#httpContext:getArguments">httpContext:getArguments (path)</a></td>
	<td class="summary">Returns the captured values of the specified path.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#httpContext:replacePath">httpContext:replacePath (path)</a></td>
	<td class="summary">Returns the target path of the specified path.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#HttpServer.HttpContext">HttpServer.HttpContext</a></td>
	<td class="summary">The HttpContext class.</td>
	</tr>
</table>

<br/>
<br/>


    <h2 class="section-header has-description"><a name="Class_HttpServer"></a>Class HttpServer </h2>

          <div class="section-description">
          An HTTP server.
The basic HTTP 1.1 server implementation.
          </div>
            <h3>Usage:</h3>
            <pre class="example"><span class="keyword">local</span> event = <span class="global">require</span>(<span class="string">'jls.lang.event'</span>)
<span class="keyword">local</span> HttpServer = <span class="global">require</span>(<span class="string">'jls.net.http.HttpServer'</span>)
<span class="keyword">local</span> hostname, port = <span class="string">'::'</span>, <span class="number">3001</span>
<span class="keyword">local</span> httpServer = HttpServer:new()
httpServer:bind(hostname, port):<span class="global">next</span>(<span class="keyword">function</span>()
  <span class="global">print</span>(<span class="string">'Server bound to "'</span>..hostname..<span class="string">'" on port '</span>..<span class="global">tostring</span>(port))
<span class="keyword">end</span>, <span class="keyword">function</span>(err) <span class="comment">-- could failed if address is in use or hostname cannot be resolved
</span>  <span class="global">print</span>(<span class="string">'Cannot bind HTTP server, '</span>..<span class="global">tostring</span>(err))
<span class="keyword">end</span>)
httpServer:createContext(<span class="string">'/'</span>, <span class="keyword">function</span>(httpExchange)
  <span class="keyword">local</span> response = httpExchange:getResponse()
  response:setBody(<span class="string">'It works !'</span>)
<span class="keyword">end</span>)
event:loop()</pre>
    <dl class="function">
    <dt>
    <a name = "HttpServer:new"></a>
    <strong>HttpServer:new ()</strong>
    </dt>
    <dd>
    Creates a new HTTP server.

    </ul>


    <h3>Returns:</h3>
    <ol>

        a new HTTP server
    </ol>




</dd>
    <dt>
    <a name = "httpServer:createContext"></a>
    <strong>httpServer:createContext (path, handler)</strong>
    </dt>
    <dd>
    Creates a context in this server with the specified path and using the specified handler.
 The path is a Lua pattern that match the full path, take care of escaping the magic characters ^$()%.[]*+-?.
 You could use the <a href="../modules/jls.util.strings.html#">jls.util.strings</a>.escape() function.
 The path is absolute and starts with a slash '/'.

    </ul>

    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">path</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.4/manual.html#6.4">string</a></span>
         The path of the context.
        </li>
        <li><span class="parameter">handler</span>
         The <a href="../modules/jls.net.http.HttpHandler.html#">handler</a> or a handler function.
   The function takes one argument which is the <a href="../modules/jls.net.http.HttpExchange.html">HttpExchange</a> and will be called when the body is available.
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

        the new context
    </ol>




</dd>
    <dt>
    <a name = "httpServer:addContexts"></a>
    <strong>httpServer:addContexts (contexts)</strong>
    </dt>
    <dd>
    Adds the specified contexts.
 It could be a mix of contexts or pair of path, handler to create.

    </ul>

    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">contexts</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.4/manual.html#6.6">table</a></span>
         The contexts to add.
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

        the new context
    </ol>




</dd>
    <dt>
    <a name = "httpServer:bind"></a>
    <strong>httpServer:bind ([node[, port[, backlog[, callback]]]])</strong>
    </dt>
    <dd>
    Binds this server to the specified address and port number.

    </ul>

    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">node</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.4/manual.html#6.4">string</a></span>
         the address, the address could be an IP address or a host name.
         (<em>optional</em>)
        </li>
        <li><span class="parameter">port</span>
            <span class="types"><span class="type">number</span></span>
         the port number, 0 to let the system automatically choose a port, default is 80.
         (<em>optional</em>)
        </li>
        <li><span class="parameter">backlog</span>
            <span class="types"><span class="type">number</span></span>
         the accept queue size, default is 32.
         (<em>optional</em>)
        </li>
        <li><span class="parameter">callback</span>
            <span class="types"><span class="type">function</span></span>
         an optional callback function to use in place of promise.
         (<em>optional</em>)
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

           <span class="types"><span class="type">jls.lang.Promise</span></span>
        a promise that resolves once the server is bound.
    </ol>



    <h3>Usage:</h3>
    <ul>
        <pre class="example"><span class="keyword">local</span> s = HttpServer:new()
s:bind(<span class="string">'127.0.0.1'</span>, <span class="number">80</span>)</pre>
    </ul>

</dd>
    <dt>
    <a name = "httpServer:close"></a>
    <strong>httpServer:close ([callback])</strong>
    </dt>
    <dd>
    Closes this server.
 This method will close the pending client connections and contexts.

    </ul>

    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">callback</span>
            <span class="types"><span class="type">function</span></span>
         an optional callback function to use in place of promise.
         (<em>optional</em>)
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

           <span class="types"><span class="type">jls.lang.Promise</span></span>
        a promise that resolves once the server is closed.
    </ol>




</dd>
    <dt>
    <a name = "HttpServer.notFoundHandler"></a>
    <strong>HttpServer.notFoundHandler</strong>
    </dt>
    <dd>
    The default not found handler.

    </ul>






</dd>
</dl>
    <h2 class="section-header has-description"><a name="Class_HttpContext"></a>Class HttpContext </h2>

          <div class="section-description">
          The HttpContext class maps a path to a handler.
 The HttpContext is used by the <a href="../modules/jls.net.http.HttpServer.html">HttpServer</a>.
          </div>
    <dl class="function">
    <dt>
    <a name = "HttpContext:new"></a>
    <strong>HttpContext:new (path[, handler])</strong>
    </dt>
    <dd>
    Creates a new Context.
 The handler will be called when the request headers have been received if specified.
 The handler will be called when the body has been received if no response has been set.

    </ul>

    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">path</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.4/manual.html#6.4">string</a></span>
         the context path
        </li>
        <li><span class="parameter">handler</span>
            <span class="types"><span class="type">function</span></span>
         the context handler
   the function takes one argument which is an <a href="../modules/jls.net.http.HttpExchange.html">HttpExchange</a>.
         (<em>optional</em>)
        </li>
    </ul>





</dd>
    <dt>
    <a name = "httpContext:getPath"></a>
    <strong>httpContext:getPath ()</strong>
    </dt>
    <dd>
    Returns the context path.

    </ul>


    <h3>Returns:</h3>
    <ol>

           <span class="types"><a class="type" href="https://www.lua.org/manual/5.4/manual.html#6.4">string</a></span>
        the context path.
    </ol>




</dd>
    <dt>
    <a name = "httpContext:setPathReplacement"></a>
    <strong>httpContext:setPathReplacement (repl)</strong>
    </dt>
    <dd>
    Sets the path replacement, default is '%1'.

    </ul>

    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">repl</span>
         the replacement compliant with the string.gsub function
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

        this context
    </ol>




</dd>
    <dt>
    <a name = "httpContext:getArguments"></a>
    <strong>httpContext:getArguments (path)</strong>
    </dt>
    <dd>
    Returns the captured values of the specified path.

    </ul>

    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">path</span>



        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

           <span class="types"><a class="type" href="https://www.lua.org/manual/5.4/manual.html#6.4">string</a></span>
        the first captured value, nil if there is no captured value.
    </ol>




</dd>
    <dt>
    <a name = "httpContext:replacePath"></a>
    <strong>httpContext:replacePath (path)</strong>
    </dt>
    <dd>
    Returns the target path of the specified path.
 It consists in the first captured value, or the

    </ul>

    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">path</span>



        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

           <span class="types"><a class="type" href="https://www.lua.org/manual/5.4/manual.html#6.4">string</a></span>
        the first captured value, nil if there is no captured value.
    </ol>




</dd>
    <dt>
    <a name = "HttpServer.HttpContext"></a>
    <strong>HttpServer.HttpContext</strong>
    </dt>
    <dd>
    The HttpContext class.

    </ul>






</dd>
</dl>


</div> <!-- id="content" -->
</div> <!-- id="main" -->
<div id="about">
<i>generated by <a href="http://github.com/stevedonovan/LDoc">LDoc 1.4.6</a></i>
</div> <!-- id="about" -->
</div> <!-- id="container" -->
</body>
</html>
